<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ulplanet.trip.modules.sys.dao.CodeDao">

    <sql id="codeColumns">
        a.`id`,
        a.`mod_type`,
        a.`prefix`,
        a.`use_date`,
        a.`date_fmt`,
        a.`num_length`,
        a.`next_num`,
        a.`separator`,
        a.`create_by`,
        a.`create_date`,
        a.`update_by`,
        a.`update_date`,
        a.`remarks`
    </sql>

    <select id="findList" resultType="Code">
        SELECT
          <include refid="codeColumns"/>
        FROM code_opt a
    </select>

    <select id="get" resultType="Code">
        SELECT
          <include refid="codeColumns"/>
        FROM code_opt a
        WHERE id = #{id}
    </select>

	<select id="getByType" resultType="Code">
		SELECT
          <include refid="codeColumns"/>
		FROM code_opt a
		WHERE mod_type = #{modType}
	</select>

    <update id="update">
        UPDATE code_opt SET
            prefix = #{prefix},
            use_date = #{useDate},
            date_fmt = #{dateFmt},
            num_length = #{numLength},
            `separator` = #{separator},
            update_by = #{updateBy.id},
            update_date = #{updateDate},
            remarks = #{remarks}
        WHERE id = #{id}
    </update>
	
	<update id="updateNext">
		UPDATE code_opt SET
			next_num = #{nextNum},
			update_by = #{updateBy.id},
			update_date = #{updateDate},
			remarks = #{remarks}
		WHERE mod_type = #{modType}
	</update>

</mapper>